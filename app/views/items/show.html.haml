.row
  .col-xs-10.col-xs-offset-1
    .row
      .col-xs-8
        %h1
          %span{ 'ng-show' => '!editing.name'}
            {{item.name}}
            - if admin?
              %button.btn.btn-info{ type: :button, 'ng-click' => 'toggleControl("name")'}
                %span.fa.fa-edit
          - item_field_form_for 'name' do
            .form-group.col-xs-8
              .input-group
                %input.form-control{type: :text, 'ng-model' => 'item.name'}
            - v_submit_tag
    .row
      .col-xs-8
        %h2{title: 'Серийный номер'}
          %span{ 'ng-show' => '!editing.serial'}
            SN: {{ item.serial }}
            - if admin?
              %button.btn.btn-info{ type: :button, 'ng-click' => 'toggleControl("serial")'}
                %span.fa.fa-edit
          - item_field_form_for 'serial' do
            .form-group.col-xs-8
              .input-group
                %input.form-control{type: :text, 'ng-model' => 'item.serial'}
            - v_submit_tag
.row{'ng-if' => 'item.name'}
  .col-xs-5
    %img{'ng-src' => image_path('{{item.photos[0] || "placeholder.png"}}') }
    - if admin?
      %br/
      %br/
      .panel
        .panel-body
          - item_field_form_for 'photos', :horizontal, multipart: true do
            .form-group.bg-primary
              %input{ type: :file, onchange: 'angular.element(this).scope().file = this.files[0];' }
              %button.btn.btn-primary{ type: :button, 'ng-model' => 'file', 'ng-click' => 'addPhoto(file)'}
                %span.fa.fa-plus
              %br/
            %br
            - v_submit_tag
          %span.lead{ 'ng-show' => '!editing.photos'}
            Добавить/удалить:
          %span.pull-right
            %button.btn.btn-info{ type: :button, 'ng-click' => 'toggleControl("photos")', 'ng-show' => '!editing.photos'}
              %span.fa.fa-plus
            %button.btn.btn-info{ type: :button, 'ng-show' => '!editing.photos'}
              %span.fa.fa-minus

  .col-xs-5.col-xs-offset-1.container
    .row
      %center.col-xs-6.lead{'ng-show' => '!editing.price'}
        %strong {{ item.price }}
        %span.fa.fa-rub
        %br/
        %br/
        %span.alert.alert-success{'ng-if' => 'item.count > 0'}
          В наличии
        %span.alert.alert-danger{'ng-if' => 'item.count == 0'}
          Нет в наличии
      - if admin?
        %span
          %button.btn.btn-info{ type: :button, 'ng-click' => 'toggleControl("price")', 'ng-show' => '!editing.price'}
            %span.fa.fa-edit
        .col-xs-8
          - item_field_form_for 'price' do
            .form-group.col-xs-8
              .input-group
                .input-group-addon
                  %span.fa.fa-rub
                %input.form-control{type: :number, 'ng-model' => 'item.price'}
            - v_submit_tag
      - unless admin?
        .col-xs-6.lead{'ng-if' => 'item.count > 0'}
          %a.btn.btn-lg.btn-primary{href: '#'}
            %span.fa.fa-money
            Купить
          %br/
          %br/
          %a.btn.btn-lg.btn-primary{href: '#'}
            %span.fa.fa-shopping-cart
            В корзину
        %br/
      %br/
    .row

      .col-xs-12.well{'ng-show' => '!editing.description'}
        - if admin?
          .col-xs-2.pull-right
            %button.btn.btn-info{ type: :button, 'ng-click' => 'toggleControl("description")'}
              %span.fa.fa-edit
        {{ item.description }}

      - if admin?
        .col-xs-12.well{'ng-show' => 'editing.description'}
          - item_field_form_for 'description', :horizontal do
            .form-group
              %textarea.form-control{ 'ng-model' => 'item.description'}
            - v_submit_tag
